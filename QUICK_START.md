# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker Compose)

–û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ç—ã—Ä—å–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏. –°–∫—Ä–∏–ø—Ç—ã `start.*` –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Desktop (Windows/macOS) –∏–ª–∏ Docker Engine + Compose v2 (Linux).
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–ø—Ä–∏–º–µ—Ä ‚Äî –≤ `README.md`).
3. –ü–æ–º–µ—Å—Ç–∏—Ç–µ –º–æ–¥–µ–ª—å YOLO –≤ `services/detection/models/bestfire.pt`.

## 2. –ó–∞–ø—É—Å–∫ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (Windows/macOS/Linux)

```bash
docker compose up --build
```

–ü–æ–¥–Ω–∏–º—É—Ç—Å—è —Å–µ—Ä–≤–∏—Å—ã:

- `frontend` ‚Äî <http://localhost>
- `backend` ‚Äî <http://localhost:8080>
- `detection` ‚Äî health –Ω–∞ <http://localhost:8001/health>
- `db` ‚Äî Postgres –Ω–∞ `localhost:5432` (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å `postgres/postgres`)

–û—Å—Ç–∞–Ω–æ–≤–∫–∞: `docker compose down`.

## 3. –ü—Ä–æ–¥–∞–∫—à–µ–Ω / Raspberry Pi

1. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ multi-arch –æ–±—Ä–∞–∑—ã (amd64/arm64) —á–µ—Ä–µ–∑ Docker Buildx (—Å–º. README).
2. –ù–∞ Raspberry Pi —Å–æ–∑–¥–∞–π—Ç–µ `.env` —Å –ø—Ä–æ–¥-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –º–æ–¥–µ–ª—å –≤ `services/detection/models/`.
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ç–µ–∫ —Å override:

```bash
docker compose \
  -f docker-compose.yml \
  -f docker-compose.prod.yml \
  up -d
```

Override –¥–æ–±–∞–≤–ª—è–µ—Ç `shm_size`, tmpfs –∏ –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏.

## 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤: `docker compose logs -f backend detection`
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é: `docker compose exec backend node src/server.js`
- –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ volume –ë–î: `docker compose down -v`

## 5. –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

- **–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –º–æ–¥–µ–ª–∏?** –í `services/detection/models/`; –∫–∞—Ç–∞–ª–æ–≥ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- **–ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –∫–∞–º–µ—Ä—ã?** –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–ø–∏—Å—å –∫–∞–º–µ—Ä—ã —á–µ—Ä–µ–∑ `POST /api/cameras`; –¥–µ—Ç–µ–∫—Ç–æ—Ä –ø–æ–¥—Ç—è–Ω–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –ø–æ `CAMERA_CONFIG_URL`.
- **–ú–æ–∂–Ω–æ –ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–µ–∑ Docker?** –î–∞, –≤—Ä—É—á–Ω—É—é (Node.js + Python), –Ω–æ –æ—Å–Ω–æ–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è —Å—Ö–µ–º–∞ ‚Äî Docker Compose.


